import htpy as h
from markupsafe import Markup

from ..models import Logo, School

VOTER_BOWL_LOGO = Markup("""
    <svg viewBox="0 0 102 103" xmlns="http://www.w3.org/2000/svg" fill="currentColor">
    <g clip-path="url(#clip0_168_1261)">
    <path d="M1.61552 32.9358L0 31.9804L1.41479 29.5889L2.94539 30.4942L8.20887 31.8317L4.50108 27.8634L2.97048 26.9582L4.38527 24.5667L6.02396 25.5356L11.4766 31.6851L9.65068 34.7713L1.61166 32.9377L1.61552 32.9358Z" fill="currentColor" />
    <path d="M19.467 22.1676L15.846 25.8561L13.7036 25.8754L8.92458 21.1832L8.90527 19.0407L12.5262 15.3522L14.6687 15.3329L19.4477 20.0251L19.467 22.1676ZM11.5747 19.89L14.9466 23.2002L16.7957 21.3164L13.4237 18.0062L11.5747 19.89Z" fill="currentColor" />
    <path d="M19.2604 12.9222L17.9229 10.8087L24.2634 6.79596L25.6009 8.90946L23.6052 10.1737L27.4693 16.2807L25.1203 17.7669L21.2562 11.6599L19.2604 12.9222Z" fill="currentColor" />
    <path d="M39.209 11.1909L32.7932 13.4723L29.5332 4.30802L35.8698 2.05362L36.7075 4.41032L32.9881 5.73246L33.4398 7.00249L36.1902 6.02391L36.889 7.98879L34.1385 8.96737L34.5709 10.1853L38.3674 8.83419L39.2051 11.1909H39.209Z" fill="currentColor" />
    <path d="M45.7909 10.0328L43.0269 10.3242L42.0098 0.650395L48.1881 -6.10352e-05L49.8538 1.34717L50.1897 4.53962L49.3115 5.62436L50.458 6.55275L50.7687 9.50972L48.0048 9.80117L47.7365 7.24374L47.4006 6.97159L45.4937 7.17233L45.7948 10.0328H45.7909ZM47.3813 4.4296L47.1613 2.34312L45.0053 2.57088L45.2563 4.96232L47.1073 4.76738L47.3794 4.43153L47.3813 4.4296Z" fill="currentColor" />
    <path d="M66.2226 11.7873L60.1484 10.2412L62.5476 0.814453L68.5407 2.33926L69.6351 4.18061L69.0599 6.44273L67.8767 7.1453L68.6391 8.42884L68.0639 10.691L66.2226 11.7853V11.7873ZM65.8809 8.00035L65.6609 7.62783L63.8022 7.15495L63.3911 8.77048L65.5451 9.31863L65.8809 7.99842V8.00035ZM66.431 5.50276L66.7669 4.18254L64.692 3.65368L64.2809 5.26921L66.0585 5.72086L66.431 5.50082V5.50276Z" fill="currentColor" />
    <path d="M76.9837 16.7111L72.4459 14.2328L71.8418 12.1772L75.0516 6.29798L77.1072 5.69385L81.645 8.17214L82.2491 10.2277L79.0393 16.1069L76.9837 16.7111ZM77.0204 8.49641L74.7563 12.6443L77.0744 13.9104L79.3384 9.76258L77.0204 8.49641Z" fill="currentColor" />
    <path d="M86.6859 13.5688L88.0428 12.2332L89.9922 14.2135L88.7241 15.4623L86.2844 19.4634L90.4303 17.1955L91.6984 15.9467L93.6479 17.9271L92.3798 19.1759L90.0385 23.3141L94.086 20.9091L95.3541 19.6603L97.3036 21.6406L95.9467 22.9763L88.7144 26.7825L86.794 24.8312L89.168 20.3088L84.6978 22.7022L82.7773 20.7508L86.6859 13.5688Z" fill="currentColor" />
    <path d="M95.2542 37.0412L92.166 31.6021L100.626 26.7999L101.998 29.2164L95.7136 32.7833L97.4295 35.804L95.2542 37.0393V37.0412Z" fill="currentColor" />
    <path d="M51.8226 20.0907C31.1759 20.0907 14.3779 36.8887 14.3779 57.5354V68.7475L14.7331 68.7765C18.6841 69.0892 22.1062 72.187 24.2795 74.729C26.6632 77.5162 28.1109 80.2685 28.1321 80.3091L32.6332 88.2168L32.6447 88.2361C35.5689 92.7083 40.2437 95.2734 45.4744 95.2753C52.6506 95.2753 60.5603 90.1373 61.0872 80.614L61.6759 69.9712C61.923 65.4895 65.32 61.718 69.7516 61.0058L89.2653 57.8654V57.5373C89.2653 36.8906 72.4673 20.0927 51.8206 20.0927L51.8226 20.0907ZM45.5496 84.4608C42.888 84.4608 40.7243 82.2971 40.7243 79.6354C40.7243 76.9738 42.888 74.8101 45.5496 74.8101C48.2113 74.8101 50.375 76.9738 50.375 79.6354C50.375 82.2971 48.2113 84.4608 45.5496 84.4608ZM83.1178 49.7839C82.9402 50.0986 82.6526 50.3263 82.3052 50.4228C82.1856 50.4556 82.062 50.473 81.9404 50.473C81.3382 50.473 80.8036 50.0677 80.6395 49.4848C77.7192 39.0466 69.3637 30.9864 58.8328 28.4482C58.4835 28.3633 58.1862 28.1471 57.9971 27.8402C57.8079 27.5314 57.752 27.1685 57.835 26.8192C57.9816 26.2093 58.5221 25.7846 59.1474 25.7846C59.2536 25.7846 59.3617 25.7981 59.4659 25.8232C70.9483 28.591 80.0585 37.379 83.2413 48.759C83.3378 49.1065 83.2934 49.4713 83.1178 49.7859V49.7839Z" fill="currentColor" />
    <path d="M72.8165 75.3428L71.0968 60.3997L69.6935 60.6255C69.2631 60.695 68.8443 60.7915 68.4351 60.9112L70.0101 74.5939L61.1662 72.2334L61.0137 74.9896L70.3421 77.4795L71.2531 85.395L60.4849 82.5172C60.3247 83.432 60.0892 84.3025 59.7881 85.1286L71.587 88.2805L72.1294 92.9939C72.7972 98.6936 77.6283 102.99 83.3666 102.99H89.8731L96.5784 81.6853L72.8165 75.3409V75.3428ZM87.8909 100.288H83.3666C78.9987 100.288 75.3218 97.0163 74.8142 92.6813L74.3934 89.0314L90.1125 93.2313L87.8909 100.288ZM74.0595 86.1458L73.1485 78.2284L93.1524 83.5691L90.9231 90.6527L74.0595 86.1458Z" fill="currentColor" />
    </g>
    <defs>
    <clipPath id="clip0_168_1261">
    <rect width="102" height="102.99" fill="currentColor" />
    </clipPath>
    </defs>
    </svg>
""")


def school_logo(school: School) -> h.Element:
    """Render a school's logo as an image element."""
    return h.div(".logo")[
        h.img(
            src=school.logo.url,
            alt=f"{school.short_name} {school.mascot} logo",
        )
    ]


_LOGO_STYLE = """
me {
  display: flex;
  gap: 0.5rem;
}

me .bubble {
  display: flex;
  align-items: center;
  overflow: hidden;
  width: 48px;
  height: 48px;
  background-color: {logo_bg_color};
}

me .bubble img {
  display: block;
  margin: 0 auto;
  max-width: 80%;
  max-height: 80%;
}

me .bg {
  display: flex;
  font-weight: 600;
  align-items: center;
  justify-content: center;
  padding-left: 0.5rem;
  padding-right: 0.5rem;
  background-color: {logo_bg_color};
  color: {logo_bg_text_color};
}

me .action {
  cursor: pointer;
  display: flex;
  font-weight: 600;
  align-items: center;
  justify-content: center;
  padding-left: 0.5rem;
  padding-right: 0.5rem;
  transition: opacity 0.2s;
  background-color: {logo_action_color};
  color: {logo_action_text_color};
}

me .action:hover {
  opacity: 0.7;
  transition: opacity 0.2s ease-in-out;
}
"""


def _style(logo: Logo) -> h.Element:
    return h.style[
        _LOGO_STYLE.replace("{logo_bg_color}", logo.bg_color)
        .replace("{logo_bg_text_color}", logo.bg_text_color)
        .replace("{logo_action_color}", logo.action_color)
        .replace("{logo_action_text_color}", logo.action_text_color)
    ]


def logo_specimen(logo: Logo) -> h.Element:
    """Render a school's logo as a specimen for our admin views."""
    return h.div[
        _style(logo),
        h.div(".bubble")[h.img(src=logo.url, alt="logo")],
        h.div(".bg")["text"],
        h.div(".action")["action"],
    ]
